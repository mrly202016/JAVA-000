# 秒杀系统设计

## 客户端

* 禁止用户重复提交，如按钮置灰，跳转页面等
* 浏览器缓存部分页面静态数据，图片等存于CDN

## 服务端

* 秒杀前预热多倍机器
* 限流：Nginx 限流，后段令牌桶算法等
* 根据能够唯一确定用户的标志，对用户请求去重
* 将库存预分配到缓存，在缓存中进行库存扣减
* 库存扣减完成后，将下单请求发送到消息队列
* 下单时再次校验实际库存，库存用完后，拦截所有请求，返回已售完

## 测试

* 充分压测
